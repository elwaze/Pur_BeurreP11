language: python
python:
  - '3.7'

before_script:
  - pip install -r requirements.txt
  - gem install mailcatcher
  - mailcatcher
  - coverage erase

env: DJANGO_SETTINGS_MODULE="pur_beurre.settings.test_settings"

services:
  - postgresql

script:
  - ./manage.py test tests.apps --settings=pur_beurre.settings.test_settings

# safelist
branches:
  only:
    - staging
